$((function(){$(document).ready((function(){a.countCart()>0&&t.removeClass("empty")}));let t=$(".cd-cart-container");t.children(".cd-cart-trigger").on("click",(function(a){a.preventDefault(),("undefined"==typeof bool?t.hasClass("cart-open"):bool)?t.removeClass("cart-open"):t.addClass("cart-open")})),t.removeClass("cart-open");const a=function(){let t=[];function a(t,a,n,o){this.name=t,this.price=a,this.count=n,this.img=o}function n(){localStorage.setItem("shoppingCart",JSON.stringify(t))}return t=JSON.parse(localStorage.getItem("shoppingCart")),null===t&&(t=[]),{addItemToCart:function(o,e,r,i){for(var c in t)if(t[c].name===o)return t[c].count+=r,void n();var l=new a(o,e,r,i);t.push(l),n()},setCountForItem:function(a,o){for(var e in t)if(t[e].name===a){t[e].count=o;break}n()},removeItemFromCart:function(a){for(var o in t)if(t[o].name===a){t[o].count--,0===t[o].count&&t.splice(o,1);break}n()},removeItemFromCartAll:function(a){for(var o in t)if(t[o].name===a){t.splice(o,1);break}n()},clearCart:function(){t=[],n()},countCart:function(){var a=0;for(var n in t)a+=t[n].count;return a},totalCart:function(){var a=0;for(var n in t)a+=t[n].price*t[n].count;return a.toFixed(2)},listCart:function(){var a=[];for(var n in t){var o=t[n],e={};for(var r in o)e[r]=o[r];e.total=(o.price*o.count).toFixed(2),a.push(e)}return a}}}();function n(){var t=a.listCart(),n="";for(var o in t)n+=`<li class='product'>\n\t\t\t\t\t<div class="product-image"><a href="#0"><img src="${t[o].img}" alt="${t[o].name}"></a></div>\n\t\t\t\t\t<div class='product-details'>\n\t\t\t\t\t\t<h3>${t[o].name}</h3>\n\t\t\t\t\t\t<span class='price'>${t[o].total} ₽</span>\n\t\t\t\t\t\t<div class='actions'>\n\t\t\t\t\t\t\t<a class='delete-item' data-name='${t[o].name}'>Удалить</a>\n\t\t\t\t\t\t\t<div class="quantity">\n\t\t\t\t\t\t\t<label for="cd-product-3">Кол</label>\n\t\t\t\t\t\t\t<span class="select">\n\t\t\t\t\t\t\t\t<select id="cd-product-3" name="quantity" class='item-count' data-name='${t[o].name}' value=''>\n\t\t\t\t\t\t\t\t\t<option value="">${t[o].count}</option>\n\t\t\t\t\t\t\t\t\t<option value="1">1</option>\n\t\t\t\t\t\t\t\t\t<option value="2">2</option>\n\t\t\t\t\t\t\t\t\t<option value="3">3</option>\n\t\t\t\t\t\t\t\t\t<option value="4">4</option>\n\t\t\t\t\t\t\t\t\t<option value="5">5</option>\n\t\t\t\t\t\t\t\t\t<option value="6">6</option>\n\t\t\t\t\t\t\t\t\t<option value="7">7</option>\n\t\t\t\t\t\t\t\t\t<option value="8">8</option>\n\t\t\t\t\t\t\t\t\t<option value="9">9</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t</li>`;$("#show-cart").html(n),$("#count-cart").html(a.countCart()),$("#total-cart").html(a.totalCart())}$(".add-to-cart").click((function(o){o.preventDefault();var e=$(this).attr("data-name"),r=Number($(this).attr("data-price")),i=$(this).attr("data-img");a.addItemToCart(e,r,1,i),n(),t.removeClass("empty")})),$("#clear-cart").click((function(o){t.removeClass("cart-open"),t.addClass("empty"),a.clearCart(),n()})),$("#show-cart").on("click",".delete-item",(function(o){o.preventDefault();var e=$(this).attr("data-name");a.removeItemFromCartAll(e),n(),0==a.countCart()&&(t.removeClass("cart-open"),t.addClass("empty"))})),$("#show-cart").on("click",".subtract-item",(function(t){var o=$(this).attr("data-name");a.removeItemFromCart(o),n()})),$("#show-cart").on("click",".plus-item",(function(t){var o=$(this).attr("data-name");a.addItemToCart(o,0,1),n()})),$("#show-cart").on("change",".item-count",(function(t){var o=$(this).attr("data-name"),e=Number($(this).val());a.setCountForItem(o,e),n()})),n()}));